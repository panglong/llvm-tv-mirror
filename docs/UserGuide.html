LLVM Visualization Tool User Guide


Required Software
------------------
 In order to compile and run the LLVM Visualization Tool the following software must be installed:
  <ul>
  <li>The Low Level Virtual Machine (LLVM) compiler infrastructure. You must
  checkout the latest version from cvs. Visit the <a href="http://llvm.cs.uiuc.edu/docs/GettingStarted.html">LLVM Getting Started Guide</a> for details.
  <li>Dot, which is part of <a href="http://www.research.att.com/sw/tools/graphviz/">Graphviz package for graph drawing.
  </ul>
Download
---------
Begin by downloading the LLVM Visualization tool. Then do the following:
  <ul>
  <li> cd <to your llvm directory>
  <li> cd projects
  <li> tar -xzvf llvm-tv.tgz
  <li> cd llvm-tv
  </ul>

Compiling
-----------
You must then compile the LLVM Visualization tool.
<ul>
<li>./configure --with-llvmsrc=[path] --with-llvmobj=[path]
   If you're building in llvm/projects/llvm-tv, then you don't need
   to specify these --with options.
<li>cd lib/wxwindows
<li>./configure --enable-debug --prefix=`pwd`
   Make absolutely sure that wxwindows's configure picks up the same
   C++ compiler that you're using for llvm. Otherwise, you may get
   weird link errors when trying to link the llvm-tv tool.
<li>cd ../../
<li>gmake
</ul>

Using the LLVM Visualization tool
---------------------------------
The main purpose of the LLVM Visualization tool is to view the effects of transformations written in the LLVM framework. We call the points in time after a transformation has been run "snapshots."

Note: opt-snap and llvm-tv.exe may be found in the tools/Debug directory.

Acquiring a Snapshot:

	  Using the LLVM tool 'opt', one runs transformations on an LLVM Bytecode file. Please see the <a href="http://llvm.cs.uiuc.edu/docs/CommandGuide/opt.html">man page</a> on opt for details on what transformations are available. 

In order to aquire snapshots after a transformation or a series of
transformations have been applied, you use the 'opt-snap' tool. You simply place the option '-snapshot' after specifying your transformation options. You may ask for a snapshot any number of times.

Here is an example of using opt to acquire snapshots:
<li>opt-snap -debug -licm -snapshot -gcse -snapshot < bytecode-file.bc > /dev/null

All snapshots are placed in the directory /tmp/llvm-tv-username/snapshots, where username is your login name.

Viewing a Snapshot:
 Begin by starting up the LLVM Visualization tool GUI.
<li>./llvm-tv.exe

This should pop up a window such as the following:

<insert screenshot here>

Notice that all the snapshots are listed in the tree view structure on the left side of the frame. Compilation units in LLVM have a simple, hierarchical structure:
a Module contains Functions, which contain BasicBlocks, which contain
Instructions. The tree view will show you functions within the snapshot you are viewing.

From this screen shot you can see we have expanded the ...
<insert screen shot here>
   

To the right of the tree view is a tabbed pane that allows you to easily browse different views of the snapshot.

TextView:
Explain, insert screen shot

HTMLView:
Explain, insert screen shot

DSGraph Views:
Explain, insert screen shot

CodeView:
Explain, insert screen shot


There are also more views under the View menu. Select one of these views will open up a new frame with that view in it. There are two new views that we have not seen before: Call Graph view and Control Flow Graph view.

<show screen shot>

Call Graph:
explain.

Control Flow Graph:
explain and screen shot

Additionally you can use the File menu to add more snapshots to the visualizer.

Add Module:
Explain

Refresh:
Explain


Snapshots and Signaling
A neat feature of the LLVM Visualization tool is that the GUI will automatically refresh the snapshot listing when opt-snap signals that a new snapshot has been generated.







   
  